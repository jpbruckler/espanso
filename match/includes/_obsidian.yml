global_vars:
  - name: "people"
    type: echo
    params:
      echo: "@{ 
                'bb'  = 'Brandi Bruckler';
                'mb'  = 'Michael Bruckler';
                'mom' = 'Roxanne Bruckler';
                'sb'  = 'Sarah Bruckler';
                'lsm' = 'Laura St Marie';
                'kra' = 'Kyle Andrus';
                'ba'  = 'Bryan Adams';
                'sem' = 'Steven Motts'; 
                'ah'  = 'Alyse Hart';
                'dk'  = 'Dan Karrick';
                'bk'  = 'Brian Kissick';
                'cb'  = 'Chris Bentley';
                'gr'  = 'Gytis Radvilavicius';
                'jw'  = 'Jori Walker';
                'rh'  = 'Rick Hart';
              }"
matches:
  - regex: ":.nr(?P<num>\\d)"
    replace: "[^{{num}}]"
  - regex: ".fnl(?P<num>\\d)"
    replace: "[^{{num}}]: "
  - trigger: ".ddb"
    replace: "[{{ddbform.item}}](https://ddb.ac/{{ddbform.choice}}/{{item_lower}})"
    vars:
      - name: "ddbform"
        type: form
        params:
          layout: "Type: [[choice]] \nItem: [[item]]"
          fields:
            choice:
              type: list
              values:
                - 'backgrounds'
                - 'characters'
                - 'equipment'
                - 'magic-items'
                - 'monsters'
                - 'races'
                - 'vehicles'
      - name: item_lower
        type: shell
        params: 
          cmd: "'{{ddbform.item}}'.toLower().replace(' ','-')"
  - trigger: ".mblk"
    replace: "> [!metablock]+\n - related:: "
  - regex: "(/(?P<initials>\\w{2,3})\\s)"
    replace: "[[@{{name}}]] "
    vars:
      - name: name
        type: shell
        params:
          cmd: "{{people}} | % { $_.'{{initials}}' };"